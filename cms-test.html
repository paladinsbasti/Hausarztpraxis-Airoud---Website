<!DOCTYPE html>
<html>
<head>
    <title>CMS Test Controls</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 15px; margin: 5px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background: #45a049; }
        #status { padding: 10px; background: #f5f5f5; margin: 10px 0; border-left: 4px solid #4CAF50; }
    </style>
</head>
<body>
    <h1>CMS Test Controls</h1>
    
    <div id="status">Use these buttons to test CMS functionality on the main page</div>
    
    <button onclick="openMain()">Open Main Page</button>
    <button onclick="testMainPageCMS()">Test Main Page CMS</button>
    <button onclick="forceApplyToMain()">Force Apply CMS to Main</button>
    <button onclick="manualApplyToMain()">Manual Apply to Main</button>
    
    <div id="results" style="margin-top: 20px;"></div>
    
    <script>
    let mainWindow = null;
    
    function openMain() {
        mainWindow = window.open('/', 'mainpage');
        document.getElementById('status').innerHTML = 'Main page opened. Wait 3 seconds then try other buttons.';
    }
    
    function testMainPageCMS() {
        if (!mainWindow) {
            alert('Please open main page first');
            return;
        }
        
        try {
            mainWindow.testSelectors();
            document.getElementById('status').innerHTML = 'Test executed. Check main page console for results.';
        } catch (error) {
            document.getElementById('status').innerHTML = 'Error: ' + error.message;
        }
    }
    
    function forceApplyToMain() {
        if (!mainWindow) {
            alert('Please open main page first');
            return;
        }
        
        try {
            mainWindow.forceApplyCMS();
            document.getElementById('status').innerHTML = 'Force apply executed. Check main page console and content.';
        } catch (error) {
            document.getElementById('status').innerHTML = 'Error: ' + error.message;
        }
    }
    
    function manualApplyToMain() {
        if (!mainWindow) {
            alert('Please open main page first');
            return;
        }
        
        try {
            mainWindow.applyAllSections();
            document.getElementById('status').innerHTML = 'Manual apply executed. Check main page - titles should have different colors if changed.';
        } catch (error) {
            document.getElementById('status').innerHTML = 'Error: ' + error.message;
        }
    }
    </script>
</body>
</html>
